<script setup>
const description = 'Senura Fernando - Senior Quality Engineer sharing content on testing, automation, quality engineering, and modern web development.'
const ogTitle = 'Senura Fernando'
const twitterDescription = 'My website of where I play around with Nuxt, Playwright and more and showcase my blog, resources etc'
const twitterCard = 'https://senurafernando.com/twitter-card.png'
const mySite = 'https://senurafernando.com'

const { path } = useRoute()
const canonical = computed(() => {
  if (path === '/')
    return mySite
  const { href: canonical } = new URL(path, mySite)
  return canonical
})

useHead({
  htmlAttrs: {
    lang: 'en',
  },
  charset: 'utf-8',
  title: ogTitle,
  titleTemplate: title =>
    title !== ogTitle
      ? `${title} Â· Senura Fernando`
      : title,
  meta: [
    {
      name: 'google-site-verification',
      content: 'Nb9JyfPdxgxIzfosyzt-JsvJZkoUVlhEYN4TuoLPWF0',
    },
    {
      name: 'description',
      content:
          description,
    },
    // Test on: https://developers.facebook.com/tools/debug/ or https://socialsharepreview.com/
    { property: 'og:site_name', content: mySite },
    { property: 'og:type', content: 'website' },
    {
      property: 'og:url',
      content: mySite,
    },
    {
      property: 'og:title',
      content: ogTitle,
    },
    {
      property: 'og:description',
      content:
          description,
    },
    {
      property: 'og:image',
      content: twitterCard,
    },
    // Test on: https://cards-dev.twitter.com/validator or https://socialsharepreview.com/
    { name: 'twitter:site', content: '@senura_' },
    { name: 'twitter:card', content: 'summary_large_image' },
    {
      name: 'twitter:url',
      content: mySite,
    },
    {
      name: 'twitter:title',
      content: ogTitle,
    },
    {
      name: 'twitter:description',
      content: twitterDescription,
    },
    {
      name: 'twitter:image',
      content: twitterCard,
    },

  ],
  link: [
    { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },
    {
      rel: 'canonical',
      href: canonical.value,
    },
    {
      rel: 'alternate',
      type: 'application/rss+xml',
      title: 'Senura Fernando RSS Feed',
      href: `${mySite}/feed.xml`,
    },
  ],
})
</script>

<template>
  <div class="min-h-screen flex flex-col">
    <TheTopBar />
    <main class="flex-1 w-full">
      <div class="lg:container mx-auto mt-top-bar px-2 md:px-4">
        <NuxtPage />
      </div>
    </main>
    <TheFooter />
  </div>
</template>
